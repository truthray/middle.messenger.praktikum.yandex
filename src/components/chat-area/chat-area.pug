script(src='./components/chat-area/chat-area.js')

include ../base/message/message.pug
include ../base/avatar/avatar.pug
include ../base/styled-btn/styled-btn.pug
include ../base/styled-control-btn/styled-control-btn.pug

mixin chat-area(messages)
    .chat-container
        div
            each message in messages
                if (message.date !== currentDate)
                    - currentDate = message.date
                    .message-date #{message.date}
                .message-block(class=message.self ? 'message-block--self' : null)
                    if (!message.self)
                        +avatar(message.avatar)
                    +message(message)
                    if (message.self)
                        +avatar(message.avatar)
        .new-message-block
            div(onclick='application.chatArea.addFileClickHandler()')
                +styled-control-btn('+')
                input(id='file_input', style="display: none", type='file')
            input.new-message-block__input(placeholder='Сообщение', id='message')
            div(onclick='application.chatArea.sendMessageHandler()')
                +styled-btn('Отправить')